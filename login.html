<!DOCTYPE html>
<html>
<!-- Head -->

<head>
    <meta charset="utf-8">
    <title>Dogwalker -- 我要遛狗网 </title>
    <!-- Meta-Tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="keywords" content="Covid, dog, pet">


    <link href="login-css/popupbox.css" rel="stylesheet" type="text/css" media="all" />

    <!-- Style -->
    <link rel="stylesheet" href="login-css/style.css" type="text/css" media="all">

    <link rel="icon" sizes="16x16" href="login-images/dog-icon.png">


</head>

<!-- Body -->

<body>
    <div></div>
    <h1>
        我要遛狗! <br />
        Walk a dog now!
    </h1>
    </div>

    <div class="container">
        <a href="index.html">
            <img src="login-images/dog-icon.png" alt="dogicon" height="32px"><br />
        </a>
        <h2>Login</h2>
        <div>
            <input type="username" placeholder="Enter Username" id="login-name" name="Username" required>
            <input type="password" placeholder="Enter Password" id="login-pass" name="Password" required>
            <ul class="agileinfotickwthree">
                <li>
                    <input type="checkbox" id="brand1" value="">
                    <label for="brand1"><span></span>Remember me</label>
                    <a href="#">Forgot Password?</a>
                </li>
            </ul>
            <div class="aitssendbuttonw3ls">
                <input type="submit" onclick="tryLogin()" value="Log in">
                <p> Don't have an account? <span>→</span> <a class="w3_play_icon1" href="#small-dialog1"> Register Now
                    </a></p>
                <div class="clear"></div>
            </div>
        </div>
    </div>

    <!-- register popup -->
    <div id="small-dialog1" class="mfp-hide">
        <div class="contact-form1">
            <div class="contact-w3-agileits">
                <img src="login-images/dog-icon.png" alt="dogicon" height="32px"><br />
                <h3>Sign up</h3>
                <div>
                    <div class="form-sub-w3ls">
                        <input placeholder="Username" id="username" class="username" type="text" required>
                        <div class="icon-agile">
                            <i class="fa fa-user" aria-hidden="true"></i>
                        </div>
                    </div>

                    <div class="form-sub-w3ls">
                        <input placeholder="Password" id="password" type="password" required>
                        <div class="icon-agile">
                            <i class="fa fa-unlock-alt" aria-hidden="true"></i>
                        </div>
                    </div>

                    <div class="form-sub-w3ls">
                        <input placeholder="Confirm Password" id="repsword" type="password" required>
                        <div class="icon-agile">
                            <i class="fa fa-unlock-alt" aria-hidden="true"></i>
                        </div>
                    </div>
                    <span id="empty">密码不能为空</span>
                    <span id="incorrect">两次密码不同，请重新输入</span>
                    <div class="login-check">
                        <label class="checkbox"><input type="checkbox" name="checkbox" checked="">I Accept Terms &
                            Conditions</label>
                    </div>
                    <div class="submit-w3l">
                        <input type="submit" onclick="trySignup()" value="Register">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- register popup -->


    <script type="text/javascript" src="login-js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript">
        function trySignup() {
            var user1 = {
                "username": $("#username").val(),
                "password": $("#password").val()
            }
            $.ajax({
                type: 'POST',
                data: JSON.stringify(user1),
                dataType: 'json',
                contentType: "application/json",
                url: "https://dog-partner-app.herokuapp.com/api/users",
                crossDomain: true,
                success: function (data, textStatus, xhr) {
                    if (xhr.status == "201") {
                        window.location.href = "login.html";
                    }
                },
                error: function () {
                    alert("failed");
                }
            })
        }

        function tryLogin() {
            var user2 = {
                "username": $("#login-name").val(),
                "password": $("#login-pass").val()
            }
            $.ajax({
                type: 'POST',
                data: JSON.stringify(user2),
                dataType: 'json',
                contentType: "application/json",
                url: "https://dog-partner-app.herokuapp.com/api/login",
                crossDomain: true,
                success: function (data, textStatus, xhr) {
                    if (xhr.status == "201") {
                        window.location.href = "index.html";
                    }
                    else if (xhr.status == "202" || xhr.status == "203") {
                        window.location.href = "login.html";
                    }
                },
                error: function () {
                    alert("failed");
                }
            })
        }

        $(function () {
            $("#empty").hide();
            $("#incorrect").hide();
            $("#repsword").blur(function () {
                var password = document.getElementById("password").value;
                var repsword = document.getElementById("repsword").value;
                if (password === '') {
                    $("#empty").show();
                    return false;
                }
                if (password != repsword) {
                    $("#incorrect").show();
                    return false;
                } else {
                    $("#empty").hide();
                    $("#incorrect").hide();
                }
            });
        });
    </script>

    <!-- pop-up-box-js-file -->
    <script src="login-js/jquery.magnific-popup.js" type="text/javascript"></script>
    <!--//pop-up-box-js-file -->
    <script>
        $(document).ready(function () {
            $('.w3_play_icon,.w3_play_icon1,.w3_play_icon2').magnificPopup({
                type: 'inline',
                fixedContentPos: false,
                fixedBgPos: true,
                overflowY: 'auto',
                closeBtnInside: true,
                preloader: false,
                midClick: true,
                removalDelay: 300,
                mainClass: 'my-mfp-zoom-in'
            });

        });
    </script>

</body>

</html>